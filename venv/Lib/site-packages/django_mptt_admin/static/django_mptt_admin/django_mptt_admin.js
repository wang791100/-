!function e(t,o,n){function r(s,a){if(!o[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var h=o[s]={exports:{}};t[s][0].call(h.exports,function(e){var o=t[s][1][e];return r(o||e)},h,h.exports,e,t,o,n)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,o,n,r){function d(){return(r?a.default.parse(document.cookie)[r]:null)||document.querySelector('[name="csrfmiddlewaretoken"]').value}var h=null,u=new l.default(e.data("insert_at_url"),!0),p={};e.tree({autoOpen:t,autoEscape:o,buttonLeft:n,dragAndDrop:!0,onCreateLi:function(e,t,o){var n=t.find(".jqtree-title");u.query.insert_at=""+e.id;var r=i(u),s=o?"0":"-1";n.after('<a href="'+e.url+'" class="edit" tabindex="'+s+'">('+gettext("edit")+")</a>",'<a href="'+r+'" class="edit" tabindex="'+s+'">('+gettext("add")+")</a>")},saveState:e.data("save_state"),useContextMenu:e.data("use_context_menu"),onLoadFailed:function(){e.html(gettext("Error while loading the data from the server"))},closedIcon:n?"&#x25c0;":"&#x25ba;",onLoading:function(e,t,o){var n=t?t.id:"__root__";if(e)p[n]=(new s.default).spin(t?o.find(".jqtree-element")[0]:o[0]);else{var r=p[n];r&&(r.stop(),p[n]=null)}}}),e.on("tree.move",function(e){var t=e.move_info,o={target_id:t.target_node.id,position:t.position};h&&(jQuery(h.element).find(".mptt-admin-error").remove(),h=null),e.preventDefault(),jQuery.ajax({type:"POST",url:t.moved_node.move_url,data:o,beforeSend:function(e){e.setRequestHeader("X-CSRFToken",d())},success:function(){t.do_move()},error:function(){jQuery(t.moved_node.element).find(".jqtree-element").append('<span class="mptt-admin-error">'+gettext("move failed")+"</span>"),h=t.moved_node}})}),e.on("tree.select",function(e){var t=e.node,o=e.deselected_node;o&&jQuery(o.element).find(".edit").attr("tabindex",-1),t&&jQuery(t.element).find(".edit").attr("tabindex",0)})}function i(e){var t=e.pathname,o=e.query,n=d.default.stringify(o);return n?t+"?"+n:t}e("jqtree");var s=n(e("spin")),a=n(e("cookie")),l=n(e("url-parse")),d=n(e("querystringify"));jQuery(function(){var e=jQuery("#tree");e.length&&r(e,e.data("auto_open"),e.data("autoescape"),"1"===e.data("rtl"),e.data("csrf-cookie-name"))})},{cookie:2,jqtree:13,querystringify:16,spin:18,"url-parse":19}],2:[function(e,t,o){"use strict";function n(e,t){try{return t(e)}catch(t){return e}}o.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var o={},i=t||{},a=e.split(s),l=i.decode||r,d=0;d<a.length;d++){var h=a[d],u=h.indexOf("=");if(!(u<0)){var p=h.substr(0,u).trim(),c=h.substr(++u,h.length).trim();'"'==c[0]&&(c=c.slice(1,-1)),void 0==o[p]&&(o[p]=n(c,l))}}return o},o.serialize=function(e,t,o){var n=o||{},r=n.encode||i;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");var s=r(t);if(s&&!a.test(s))throw new TypeError("argument val is invalid");var l=e+"="+s;if(null!=n.maxAge){var d=n.maxAge-0;if(isNaN(d))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(d)}if(n.domain){if(!a.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!a.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return l};var r=decodeURIComponent,i=encodeURIComponent,s=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},{}],3:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();o.__esModule=!0;var r=e("./node"),i=e("./util"),s=function(){function e(e){this.tree_widget=e,this.hovered_area=null,this.$ghost=null,this.hit_areas=[],this.is_dragging=!1,this.current_item=null}return e.prototype.mouseCapture=function(e){var t=$(e.target);if(!this.mustCaptureElement(t))return null;if(this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(t))return null;var o=this.tree_widget._getNodeElement(t);return o&&this.tree_widget.options.onCanMove&&(this.tree_widget.options.onCanMove(o.node)||(o=null)),this.current_item=o,null!=this.current_item},e.prototype.generateHitAreas=function(){if(this.current_item){var e=new a(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom);this.hit_areas=e.generate()}else this.hit_areas=[]},e.prototype.mouseStart=function(e){if(this.current_item){this.refresh();var t=$(e.target).offset(),o=this.current_item.node,n=this.tree_widget.options.autoEscape?i.html_escape(o.name):o.name;return this.drag_element=new l(n,e.page_x-t.left,e.page_y-t.top,this.tree_widget.element),this.is_dragging=!0,this.current_item.$element.addClass("jqtree-moving"),!0}return!1},e.prototype.mouseDrag=function(e){if(this.current_item&&this.drag_element){this.drag_element.move(e.page_x,e.page_y);var t=this.findHoveredArea(e.page_x,e.page_y);return this.canMoveToArea(t)&&t?(t.node.isFolder()||this.stopOpenFolderTimer(),this.hovered_area!==t&&(this.hovered_area=t,this.mustOpenFolderTimer(t)?this.startOpenFolderTimer(t.node):this.stopOpenFolderTimer(),this.updateDropHint())):(this.removeHover(),this.removeDropHint(),this.stopOpenFolderTimer()),t||this.tree_widget.options.onDragMove&&this.tree_widget.options.onDragMove(this.current_item.node,e.original_event),!0}return!1},e.prototype.mouseStop=function(e){this.moveItem(e),this.clear(),this.removeHover(),this.removeDropHint(),this.removeHitAreas();var t=this.current_item;return this.current_item&&(this.current_item.$element.removeClass("jqtree-moving"),this.current_item=null),this.is_dragging=!1,!this.hovered_area&&t&&this.tree_widget.options.onDragStop&&this.tree_widget.options.onDragStop(t.node,e.original_event),!1},e.prototype.refresh=function(){this.removeHitAreas(),this.current_item&&(this.generateHitAreas(),this.current_item=this.tree_widget._getNodeElementForNode(this.current_item.node),this.is_dragging&&this.current_item.$element.addClass("jqtree-moving"))},e.prototype.mustCaptureElement=function(e){return!e.is("input,select,textarea")},e.prototype.canMoveToArea=function(e){if(e&&this.current_item){if(this.tree_widget.options.onCanMoveTo){var t=r.getPositionName(e.position);return this.tree_widget.options.onCanMoveTo(this.current_item.node,e.node,t)}return!0}return!1},e.prototype.removeHitAreas=function(){this.hit_areas=[]},e.prototype.clear=function(){this.drag_element&&(this.drag_element.remove(),this.drag_element=null)},e.prototype.removeDropHint=function(){this.previous_ghost&&this.previous_ghost.remove()},e.prototype.removeHover=function(){this.hovered_area=null},e.prototype.findHoveredArea=function(e,t){var o=this.getTreeDimensions();if(e<o.left||t<o.top||e>o.right||t>o.bottom)return null;for(var n=0,r=this.hit_areas.length;n<r;){var i=n+r>>1,s=this.hit_areas[i];if(t<s.top)r=i;else{if(!(t>s.bottom))return s;n=i+1}}return null},e.prototype.mustOpenFolderTimer=function(e){var t=e.node;return t.isFolder()&&!t.is_open&&e.position===r.Position.Inside},e.prototype.updateDropHint=function(){if(this.hovered_area){this.removeDropHint();var e=this.tree_widget._getNodeElementForNode(this.hovered_area.node);this.previous_ghost=e.addDropHint(this.hovered_area.position)}},e.prototype.startOpenFolderTimer=function(e){var t=this;this.stopOpenFolderTimer(),this.open_folder_timer=setTimeout(function(){t.tree_widget._openNode(e,t.tree_widget.options.slide,function(){t.refresh(),t.updateDropHint()})},this.tree_widget.options.openFolderDelay)},e.prototype.stopOpenFolderTimer=function(){this.open_folder_timer&&(clearTimeout(this.open_folder_timer),this.open_folder_timer=null)},e.prototype.moveItem=function(e){var t=this;if(this.current_item&&this.hovered_area&&this.hovered_area.position!==r.Position.None&&this.canMoveToArea(this.hovered_area)){var o=this.current_item.node,n=this.hovered_area.node,i=this.hovered_area.position,s=o.parent;i===r.Position.Inside&&(this.hovered_area.node.is_open=!0);var a=function(){t.tree_widget.tree.moveNode(o,n,i),t.tree_widget.element.empty(),t.tree_widget._refreshElements(null)};this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:o,target_node:n,position:r.getPositionName(i),previous_parent:s,do_move:a,original_event:e.original_event}}).isDefaultPrevented()||a()}},e.prototype.getTreeDimensions=function(){var e=this.tree_widget.element.offset();return{left:e.left,top:e.top,right:e.left+this.tree_widget.element.width(),bottom:e.top+this.tree_widget.element.height()+16}},e}();o.DragAndDropHandler=s;var a=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.current_node=o,r.tree_bottom=n,r}return n(t,e),t.prototype.generate=function(){return this.positions=[],this.last_top=0,this.iterate(),this.generateHitAreas(this.positions)},t.prototype.generateHitAreas=function(e){for(var t=-1,o=[],n=[],r=0,i=e;r<i.length;r++){var s=i[r];s.top!==t&&o.length&&(o.length&&this.generateHitAreasForGroup(n,o,t,s.top),t=s.top,o=[]),o.push(s)}return this.generateHitAreasForGroup(n,o,t,this.tree_bottom),n},t.prototype.handleOpenFolder=function(e,t){return e!==this.current_node&&(e.children[0]!==this.current_node&&this.addPosition(e,r.Position.Inside,this.getTop(t)),!0)},t.prototype.handleClosedFolder=function(e,t,o){var n=this.getTop(o);e===this.current_node?this.addPosition(e,r.Position.None,n):(this.addPosition(e,r.Position.Inside,n),t!==this.current_node&&this.addPosition(e,r.Position.After,n))},t.prototype.handleFirstNode=function(e){e!==this.current_node&&this.addPosition(e,r.Position.Before,this.getTop($(e.element)))},t.prototype.handleAfterOpenFolder=function(e,t){e===this.current_node||t===this.current_node?this.addPosition(e,r.Position.None,this.last_top):this.addPosition(e,r.Position.After,this.last_top)},t.prototype.handleNode=function(e,t,o){var n=this.getTop(o);e===this.current_node?this.addPosition(e,r.Position.None,n):this.addPosition(e,r.Position.Inside,n),t===this.current_node||e===this.current_node?this.addPosition(e,r.Position.None,n):this.addPosition(e,r.Position.After,n)},t.prototype.getTop=function(e){return e.offset().top},t.prototype.addPosition=function(e,t,o){var n={top:o,bottom:0,node:e,position:t};this.positions.push(n),this.last_top=o},t.prototype.generateHitAreasForGroup=function(e,t,o,n){for(var r=Math.min(t.length,4),i=Math.round((n-o)/r),s=o,a=0;a<r;){var l=t[a];e.push({top:s,bottom:s+i,node:l.node,position:l.position}),s+=i,a+=1}},t}(function(){function e(e){this.tree=e}return e.prototype.iterate=function(){var e=this,t=!0,o=function(n,r){var i=(n.is_open||!n.element)&&n.hasChildren(),s=null;if(n.element){if(!(s=$(n.element)).is(":visible"))return;t&&(e.handleFirstNode(n),t=!1),n.hasChildren()?n.is_open?e.handleOpenFolder(n,s)||(i=!1):e.handleClosedFolder(n,r,s):e.handleNode(n,r,s)}if(i){var a=n.children.length;n.children.forEach(function(e,t){t===a-1?o(n.children[t],null):o(n.children[t],n.children[t+1])}),n.is_open&&s&&e.handleAfterOpenFolder(n,r)}};o(this.tree,null)},e}());o.HitAreasGenerator=a;var l=function(){function e(e,t,o,n){this.offset_x=t,this.offset_y=o,this.$element=$('<span class="jqtree-title jqtree-dragging">'+e+"</span>"),this.$element.css("position","absolute"),n.append(this.$element)}return e.prototype.move=function(e,t){this.$element.offset({left:e-this.offset_x,top:t-this.offset_y})},e.prototype.remove=function(){this.$element.remove()},e}();o.DragElement=l},{"./node":7,"./util":14}],4:[function(e,t,o){"use strict";o.__esModule=!0;var n=e("./util"),r=function(){function e(e){this.tree_widget=e,this.opened_icon_element=this.createButtonElement(e.options.openedIcon),this.closed_icon_element=this.createButtonElement(e.options.closedIcon)}return e.prototype.render=function(e){e&&e.parent?this.renderFromNode(e):this.renderFromRoot()},e.prototype.renderFromRoot=function(){var e=this.tree_widget.element;e.empty(),this.createDomElements(e[0],this.tree_widget.tree.children,!0,1)},e.prototype.renderFromNode=function(e){var t=$(e.element),o=this.createLi(e,e.getLevel());this.attachNodeData(e,o),t.after(o),t.remove(),e.children&&this.createDomElements(o,e.children,!1,e.getLevel()+1)},e.prototype.createDomElements=function(e,t,o,n){var r=this.createUl(o);e.appendChild(r);for(var i=0,s=t;i<s.length;i++){var a=s[i],l=this.createLi(a,n);r.appendChild(l),this.attachNodeData(a,l),a.hasChildren()&&this.createDomElements(l,a.children,!1,n+1)}},e.prototype.attachNodeData=function(e,t){e.element=t,$(t).data("node",e)},e.prototype.createUl=function(e){var t,o;e?(t="jqtree-tree",o="tree",this.tree_widget.options.rtl&&(t+=" jqtree-rtl")):(t="",o="group");var n=document.createElement("ul");return n.className="jqtree_common "+t,n.setAttribute("role",o),n},e.prototype.createLi=function(e,t){var o=Boolean(this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(e)),n=e.isFolder()?this.createFolderLi(e,t,o):this.createNodeLi(e,t,o);return this.tree_widget.options.onCreateLi&&this.tree_widget.options.onCreateLi(e,$(n),o),n},e.prototype.createFolderLi=function(e,t,o){var n=this.getButtonClasses(e),r=this.getFolderClasses(e,o),i=e.is_open?this.opened_icon_element:this.closed_icon_element,s=document.createElement("li");s.className="jqtree_common "+r,s.setAttribute("role","presentation");var a=document.createElement("div");a.className="jqtree-element jqtree_common",a.setAttribute("role","presentation"),s.appendChild(a);var l=document.createElement("a");return l.className=n,l.appendChild(i.cloneNode(!0)),l.setAttribute("role","presentation"),l.setAttribute("aria-hidden","true"),this.tree_widget.options.buttonLeft&&a.appendChild(l),a.appendChild(this.createTitleSpan(e.name,t,o,e.is_open,!0)),this.tree_widget.options.buttonLeft||a.appendChild(l),s},e.prototype.createNodeLi=function(e,t,o){var n=["jqtree_common"];o&&n.push("jqtree-selected");var r=n.join(" "),i=document.createElement("li");i.className=r,i.setAttribute("role","presentation");var s=document.createElement("div");return s.className="jqtree-element jqtree_common",s.setAttribute("role","presentation"),i.appendChild(s),s.appendChild(this.createTitleSpan(e.name,t,o,e.is_open,!1)),i},e.prototype.createTitleSpan=function(e,t,o,r,i){var s=document.createElement("span"),a="jqtree-title jqtree_common";return i&&(a+=" jqtree-title-folder"),s.className=a,s.setAttribute("role","treeitem"),s.setAttribute("aria-level",""+t),s.setAttribute("aria-selected",n.getBoolString(o)),s.setAttribute("aria-expanded",n.getBoolString(r)),o&&s.setAttribute("tabindex",this.tree_widget.options.tabIndex),s.innerHTML=this.escapeIfNecessary(e),s},e.prototype.getButtonClasses=function(e){var t=["jqtree-toggler","jqtree_common"];return e.is_open||t.push("jqtree-closed"),this.tree_widget.options.buttonLeft?t.push("jqtree-toggler-left"):t.push("jqtree-toggler-right"),t.join(" ")},e.prototype.getFolderClasses=function(e,t){var o=["jqtree-folder"];return e.is_open||o.push("jqtree-closed"),t&&o.push("jqtree-selected"),e.is_loading&&o.push("jqtree-loading"),o.join(" ")},e.prototype.escapeIfNecessary=function(e){return this.tree_widget.options.autoEscape?n.html_escape(e):e},e.prototype.createButtonElement=function(e){if("string"==typeof e){var t=document.createElement("div");return t.innerHTML=e,document.createTextNode(t.innerHTML)}return $(e)[0]},e}();o.default=r},{"./util":14}],5:[function(e,t,o){"use strict";o.__esModule=!0;var n=function(){function e(e){this.tree_widget=e,e.options.keyboardSupport&&$(document).on("keydown.jqtree",$.proxy(this.handleKeyDown,this))}return e.prototype.deinit=function(){$(document).off("keydown.jqtree")},e.prototype.moveDown=function(){var e=this.tree_widget.getSelectedNode();return!!e&&this.selectNode(e.getNextNode())},e.prototype.moveUp=function(){var e=this.tree_widget.getSelectedNode();return!!e&&this.selectNode(e.getPreviousNode())},e.prototype.moveRight=function(){var e=this.tree_widget.getSelectedNode();return!e||(!e.isFolder()||(e.is_open?this.selectNode(e.getNextNode()):(this.tree_widget.openNode(e),!1)))},e.prototype.moveLeft=function(){var e=this.tree_widget.getSelectedNode();return!e||(e.isFolder()&&e.is_open?(this.tree_widget.closeNode(e),!1):this.selectNode(e.getParent()))},e.prototype.handleKeyDown=function(t){if(!this.canHandleKeyboard())return!0;switch(t.which){case e.DOWN:return this.moveDown();case e.UP:return this.moveUp();case e.RIGHT:return this.moveRight();case e.LEFT:return this.moveLeft();default:return!0}},e.prototype.selectNode=function(e){return!e||(this.tree_widget.selectNode(e),this.tree_widget.scroll_handler&&!this.tree_widget.scroll_handler.isScrolledIntoView($(e.element).find(".jqtree-element"))&&this.tree_widget.scrollToNode(e),!1)},e.prototype.canHandleKeyboard=function(){return this.tree_widget.options.keyboardSupport&&this.isFocusOnTree()&&null!=this.tree_widget.getSelectedNode()},e.prototype.isFocusOnTree=function(){var e=document.activeElement;return e&&"SPAN"===e.tagName&&this.tree_widget._containsElement(e)},e.LEFT=37,e.UP=38,e.RIGHT=39,e.DOWN=40,e}();o.default=n},{}],6:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();o.__esModule=!0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.setMouseDelay=function(e){this.mouse_delay=e},t.prototype._init=function(){this.$el.on("mousedown.mousewidget",$.proxy(this._mouseDown,this)),this.$el.on("touchstart.mousewidget",$.proxy(this._touchStart,this)),this.is_mouse_started=!1,this.mouse_delay=0,this._mouse_delay_timer=null,this._is_mouse_delay_met=!0,this.mouse_down_info=null},t.prototype._deinit=function(){this.$el.off("mousedown.mousewidget"),this.$el.off("touchstart.mousewidget");var e=$(document);e.off("mousemove.mousewidget"),e.off("mouseup.mousewidget")},t.prototype._mouseDown=function(e){if(1===e.which){var t=this._handleMouseDown(this._getPositionInfo(e));return t&&e.preventDefault(),t}},t.prototype._handleMouseDown=function(e){if(this.is_mouse_started&&this._handleMouseUp(e),this.mouse_down_info=e,this._mouseCapture(e))return this._handleStartMouse(),!0},t.prototype._handleStartMouse=function(){var e=$(document);e.on("mousemove.mousewidget",$.proxy(this._mouseMove,this)),e.on("touchmove.mousewidget",$.proxy(this._touchMove,this)),e.on("mouseup.mousewidget",$.proxy(this._mouseUp,this)),e.on("touchend.mousewidget",$.proxy(this._touchEnd,this)),this.mouse_delay&&this._startMouseDelayTimer()},t.prototype._startMouseDelayTimer=function(){var e=this;this._mouse_delay_timer&&clearTimeout(this._mouse_delay_timer),this._mouse_delay_timer=setTimeout(function(){e._is_mouse_delay_met=!0},this.mouse_delay),this._is_mouse_delay_met=!1},t.prototype._mouseMove=function(e){return this._handleMouseMove(e,this._getPositionInfo(e))},t.prototype._handleMouseMove=function(e,t){return this.is_mouse_started?(this._mouseDrag(t),e.preventDefault()):!(!this.mouse_delay||this._is_mouse_delay_met)||(this.mouse_down_info&&(this.is_mouse_started=!1!==this._mouseStart(this.mouse_down_info)),this.is_mouse_started?this._mouseDrag(t):this._handleMouseUp(t),!this.is_mouse_started)},t.prototype._getPositionInfo=function(e){return{page_x:e.pageX,page_y:e.pageY,target:e.target,original_event:e}},t.prototype._mouseUp=function(e){return this._handleMouseUp(this._getPositionInfo(e))},t.prototype._handleMouseUp=function(e){var t=$(document);t.off("mousemove.mousewidget"),t.off("touchmove.mousewidget"),t.off("mouseup.mousewidget"),t.off("touchend.mousewidget"),this.is_mouse_started&&(this.is_mouse_started=!1,this._mouseStop(e))},t.prototype._touchStart=function(e){var t=e.originalEvent;if(!(t.touches.length>1)){var o=t.changedTouches[0];return this._handleMouseDown(this._getPositionInfo(o))}},t.prototype._touchMove=function(e){var t=e.originalEvent;if(!(t.touches.length>1)){var o=t.changedTouches[0];return this._handleMouseMove(e,this._getPositionInfo(o))}},t.prototype._touchEnd=function(e){var t=e.originalEvent;if(!(t.touches.length>1)){var o=t.changedTouches[0];return this._handleMouseUp(this._getPositionInfo(o))}},t}(e("./simple.widget").default);o.default=r},{"./simple.widget":12}],7:[function(e,t,o){"use strict";o.__esModule=!0;var n;!function(e){e[e.Before=1]="Before",e[e.After=2]="After",e[e.Inside=3]="Inside",e[e.None=4]="None"}(n=o.Position||(o.Position={})),o.position_names={before:n.Before,after:n.After,inside:n.Inside,none:n.None},o.getPositionName=function(e){for(var t in o.position_names)if(o.position_names.hasOwnProperty(t)&&o.position_names[t]===e)return t;return""},o.getPosition=function(e){return o.position_names[e]};var r=function(){function e(t,o,n){void 0===o&&(o=!1),void 0===n&&(n=e),this.name="",this.setData(t),this.children=[],this.parent=null,o&&(this.id_mapping={},this.tree=this,this.node_class=n)}return e.prototype.setData=function(e){var t=this,o=function(e){null!=e&&(t.name=e)};if(e)if("object"!=typeof e)o(e);else for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"label"===n?o(r):"children"!==n&&(this[n]=r)}},e.prototype.loadFromData=function(e){this.removeChildren();for(var t=0,o=e;t<o.length;t++){var n=o[t],r=new this.tree.node_class(n);this.addChild(r),"object"==typeof n&&n.children&&r.loadFromData(n.children)}},e.prototype.addChild=function(e){this.children.push(e),e._setParent(this)},e.prototype.addChildAtPosition=function(e,t){this.children.splice(t,0,e),e._setParent(this)},e.prototype.removeChild=function(e){e.removeChildren(),this._removeChild(e)},e.prototype.getChildIndex=function(e){return $.inArray(e,this.children)},e.prototype.hasChildren=function(){return 0!==this.children.length},e.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand},e.prototype.iterate=function(e){var t=function(o,n){if(o.children)for(var r=0,i=o.children;r<i.length;r++){var s=i[r];e(s,n)&&s.hasChildren()&&t(s,n+1)}};t(this,0)},e.prototype.moveNode=function(e,t,o){e.parent&&!e.isParentOf(t)&&(e.parent._removeChild(e),o===n.After?t.parent&&t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)+1):o===n.Before?t.parent&&t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)):o===n.Inside&&t.addChildAtPosition(e,0))},e.prototype.getData=function(e){function t(e){return e.map(function(e){var o={};for(var n in e)if(-1===["parent","children","element","tree"].indexOf(n)&&Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];o[n]=r}return e.hasChildren()&&(o.children=t(e.children)),o})}return void 0===e&&(e=!1),t(e?[this]:this.children)},e.prototype.getNodeByName=function(e){return this.getNodeByCallback(function(t){return t.name===e})},e.prototype.getNodeByCallback=function(e){var t=null;return this.iterate(function(o){return!e(o)||(t=o,!1)}),t},e.prototype.addAfter=function(e){if(this.parent){var t=new this.tree.node_class(e),o=this.parent.getChildIndex(this);return this.parent.addChildAtPosition(t,o+1),"object"==typeof e&&e.children&&e.children.length&&t.loadFromData(e.children),t}return null},e.prototype.addBefore=function(e){if(this.parent){var t=new this.tree.node_class(e),o=this.parent.getChildIndex(this);return this.parent.addChildAtPosition(t,o),"object"==typeof e&&e.children&&e.children.length&&t.loadFromData(e.children),t}return null},e.prototype.addParent=function(e){if(this.parent){var t=new this.tree.node_class(e);t._setParent(this.tree);for(var o=this.parent,n=0,r=o.children;n<r.length;n++){var i=r[n];t.addChild(i)}return o.children=[],o.addChild(t),t}return null},e.prototype.remove=function(){this.parent&&(this.parent.removeChild(this),this.parent=null)},e.prototype.append=function(e){var t=new this.tree.node_class(e);return this.addChild(t),"object"==typeof e&&e.children&&e.children.length&&t.loadFromData(e.children),t},e.prototype.prepend=function(e){var t=new this.tree.node_class(e);return this.addChildAtPosition(t,0),"object"==typeof e&&e.children&&e.children.length&&t.loadFromData(e.children),t},e.prototype.isParentOf=function(e){for(var t=e.parent;t;){if(t===this)return!0;t=t.parent}return!1},e.prototype.getLevel=function(){for(var e=0,t=this;t.parent;)e+=1,t=t.parent;return e},e.prototype.getNodeById=function(e){return this.id_mapping[e]},e.prototype.addNodeToIndex=function(e){null!=e.id&&(this.id_mapping[e.id]=e)},e.prototype.removeNodeFromIndex=function(e){null!=e.id&&delete this.id_mapping[e.id]},e.prototype.removeChildren=function(){var e=this;this.iterate(function(t){return e.tree.removeNodeFromIndex(t),!0}),this.children=[]},e.prototype.getPreviousSibling=function(){if(this.parent){var e=this.parent.getChildIndex(this)-1;return e>=0?this.parent.children[e]:null}return null},e.prototype.getNextSibling=function(){if(this.parent){var e=this.parent.getChildIndex(this)+1;return e<this.parent.children.length?this.parent.children[e]:null}return null},e.prototype.getNodesByProperty=function(e,t){return this.filter(function(o){return o[e]===t})},e.prototype.filter=function(e){var t=[];return this.iterate(function(o){return e(o)&&t.push(o),!0}),t},e.prototype.getNextNode=function(e){if(void 0===e&&(e=!0),e&&this.hasChildren()&&this.is_open)return this.children[0];if(this.parent){var t=this.getNextSibling();return t||this.parent.getNextNode(!1)}return null},e.prototype.getPreviousNode=function(){if(this.parent){var e=this.getPreviousSibling();return e?e.hasChildren()&&e.is_open?e.getLastChild():e:this.getParent()}return null},e.prototype.getParent=function(){return this.parent&&this.parent.parent?this.parent:null},e.prototype.getLastChild=function(){if(this.hasChildren()){var e=this.children[this.children.length-1];return e.hasChildren()&&e.is_open?e.getLastChild():e}return null},e.prototype.initFromData=function(e){var t=this,o=function(e){for(var o=0,n=e;o<n.length;o++){var r=n[o],i=new t.tree.node_class("");i.initFromData(r),t.addChild(i)}};!function(e){t.setData(e),e.children&&o(e.children)}(e)},e.prototype._setParent=function(e){this.parent=e,this.tree=e.tree,this.tree.addNodeToIndex(this)},e.prototype._removeChild=function(e){this.children.splice(this.getChildIndex(e),1),this.tree.removeNodeFromIndex(e)},e}();o.Node=r},{}],8:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();o.__esModule=!0;var r=e("./node"),i=function(){function e(e,t){this.init(e,t)}return e.prototype.init=function(e,t){this.node=e,this.tree_widget=t,e.element||(e.element=this.tree_widget.element.get(0)),this.$element=$(e.element)},e.prototype.addDropHint=function(e){return e===r.Position.Inside?new a(this.$element):new l(this.node,this.$element,e)},e.prototype.select=function(){var e=this.getLi();e.addClass("jqtree-selected"),e.attr("aria-selected","true");var t=this.getSpan();t.attr("tabindex",this.tree_widget.options.tabIndex),t.focus()},e.prototype.deselect=function(){var e=this.getLi();e.removeClass("jqtree-selected"),e.attr("aria-selected","false");var t=this.getSpan();t.removeAttr("tabindex"),t.blur()},e.prototype.getUl=function(){return this.$element.children("ul:first")},e.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")},e.prototype.getLi=function(){return this.$element},e}();o.NodeElement=i;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.open=function(e,t,o){var n=this;if(void 0===t&&(t=!0),void 0===o&&(o="fast"),!this.node.is_open){this.node.is_open=!0;var r=this.getButton();r.removeClass("jqtree-closed"),r.html("");var i=r.get(0);if(i){var s=this.tree_widget.renderer.opened_icon_element.cloneNode(!1);i.appendChild(s)}var a=function(){n.getLi().removeClass("jqtree-closed"),n.getSpan().attr("aria-expanded","true"),e&&e(n.node),n.tree_widget._triggerEvent("tree.open",{node:n.node})};t?this.getUl().slideDown(o,a):(this.getUl().show(),a())}},t.prototype.close=function(e,t){var o=this;if(void 0===e&&(e=!0),void 0===t&&(t="fast"),this.node.is_open){this.node.is_open=!1;var n=this.getButton();n.addClass("jqtree-closed"),n.html("");var r=n.get(0);if(r){var i=this.tree_widget.renderer.closed_icon_element.cloneNode(!1);r.appendChild(i)}var s=function(){o.getLi().addClass("jqtree-closed"),o.getSpan().attr("aria-expanded","false"),o.tree_widget._triggerEvent("tree.close",{node:o.node})};e?this.getUl().slideUp(t,s):(this.getUl().hide(),s())}},t.prototype.addDropHint=function(e){return this.node.is_open||e!==r.Position.Inside?new l(this.node,this.$element,e):new a(this.$element)},t.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")},t}(i);o.FolderElement=s;var a=function(){function e(e){var t=e.children(".jqtree-element"),o=e.width()-4;this.$hint=$('<span class="jqtree-border"></span>'),t.append(this.$hint),this.$hint.css({width:o,height:t.outerHeight()-4})}return e.prototype.remove=function(){this.$hint.remove()},e}();o.BorderDropHint=a;var l=function(){function e(e,t,o){this.$element=t,this.node=e,this.$ghost=$('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span>\n            <span class="jqtree_common jqtree-line"></span></li>'),o===r.Position.After?this.moveAfter():o===r.Position.Before?this.moveBefore():o===r.Position.Inside&&(e.isFolder()&&e.is_open?this.moveInsideOpenFolder():this.moveInside())}return e.prototype.remove=function(){this.$ghost.remove()},e.prototype.moveAfter=function(){this.$element.after(this.$ghost)},e.prototype.moveBefore=function(){this.$element.before(this.$ghost)},e.prototype.moveInsideOpenFolder=function(){$(this.node.children[0].element).before(this.$ghost)},e.prototype.moveInside=function(){this.$element.after(this.$ghost),this.$ghost.addClass("jqtree-inside")},e}();o.GhostDropHint=l},{"./node":7}],9:[function(e,t,o){"use strict";o.__esModule=!0;var n=e("./util"),r=function(){function e(e){this.tree_widget=e}return e.prototype.saveState=function(){var e=JSON.stringify(this.getState());this.tree_widget.options.onSetStateFromStorage?this.tree_widget.options.onSetStateFromStorage(e):this.supportsLocalStorage()&&localStorage.setItem(this.getKeyName(),e)},e.prototype.getStateFromStorage=function(){var e=this._loadFromStorage();return e?this._parseState(e):null},e.prototype.getState=function(){var e=this;return{open_nodes:function(){var t=[];return e.tree_widget.tree.iterate(function(e){return e.is_open&&e.id&&e.hasChildren()&&t.push(e.id),!0}),t}(),selected_node:e.tree_widget.getSelectedNodes().map(function(e){return e.id})}},e.prototype.setInitialState=function(e){if(e){var t=!1;return e.open_nodes&&(t=this._openInitialNodes(e.open_nodes)),e.selected_node&&(this._resetSelection(),this._selectInitialNodes(e.selected_node)),t}return!1},e.prototype.setInitialStateOnDemand=function(e,t){e?this._setInitialStateOnDemand(e.open_nodes,e.selected_node,t):t()},e.prototype.getNodeIdToBeSelected=function(){var e=this.getStateFromStorage();return e&&e.selected_node?e.selected_node[0]:null},e.prototype._parseState=function(e){var t=$.parseJSON(e);return t&&t.selected_node&&n.isInt(t.selected_node)&&(t.selected_node=[t.selected_node]),t},e.prototype._loadFromStorage=function(){return this.tree_widget.options.onGetStateFromStorage?this.tree_widget.options.onGetStateFromStorage():this.supportsLocalStorage()?localStorage.getItem(this.getKeyName()):void 0},e.prototype._openInitialNodes=function(e){for(var t=!1,o=0,n=e;o<n.length;o++){var r=n[o],i=this.tree_widget.getNodeById(r);i&&(i.load_on_demand?t=!0:i.is_open=!0)}return t},e.prototype._selectInitialNodes=function(e){for(var t=0,o=0,n=e;o<n.length;o++){var r=n[o],i=this.tree_widget.getNodeById(r);i&&(t+=1,this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.addToSelection(i))}return 0!==t},e.prototype._resetSelection=function(){var e=this.tree_widget.select_node_handler;e&&e.getSelectedNodes().forEach(function(t){e.removeFromSelection(t)})},e.prototype._setInitialStateOnDemand=function(e,t,o){var n=this,r=0,i=e,s=function(){for(var e=[],s=0,l=i;s<l.length;s++){var d=l[s],h=n.tree_widget.getNodeById(d);h?h.is_loading||(h.load_on_demand?a(h):n.tree_widget._openNode(h,!1,null)):e.push(d)}i=e,n._selectInitialNodes(t)&&n.tree_widget._refreshElements(null),0===r&&o()},a=function(e){r+=1,n.tree_widget._openNode(e,!1,function(){r-=1,s()})};s()},e.prototype.getKeyName=function(){return"string"==typeof this.tree_widget.options.saveState?this.tree_widget.options.saveState:"tree"},e.prototype.supportsLocalStorage=function(){return null==this._supportsLocalStorage&&(this._supportsLocalStorage=function(){if(null==localStorage)return!1;try{var e="_storage_test";sessionStorage.setItem(e,"value"),sessionStorage.removeItem(e)}catch(e){return!1}return!0}()),this._supportsLocalStorage},e}();o.default=r},{"./util":14}],10:[function(e,t,o){"use strict";o.__esModule=!0;var n=function(){function e(e){this.tree_widget=e,this.previous_top=-1,this.is_initialized=!1}return e.prototype.checkScrolling=function(){if(this._ensureInit(),this.tree_widget.dnd_handler){var e=this.tree_widget.dnd_handler.hovered_area;e&&e.top!==this.previous_top&&(this.previous_top=e.top,this.$scroll_parent?this._handleScrollingWithScrollParent(e):this._handleScrollingWithDocument(e))}},e.prototype.scrollTo=function(e){if(this._ensureInit(),this.$scroll_parent)this.$scroll_parent[0].scrollTop=e;else{var t=this.tree_widget.$el.offset().top;$(document).scrollTop(e+t)}},e.prototype.isScrolledIntoView=function(e){this._ensureInit();var t,o,n,r;return this.$scroll_parent?(r=0,o=this.$scroll_parent.height(),t=(n=e.offset().top-this.scroll_parent_top)+e.height()):(o=(r=$(window).scrollTop())+$(window).height(),t=(n=e.offset().top)+e.height()),t<=o&&n>=r},e.prototype._initScrollParent=function(){var e=this,t=function(){e.scroll_parent_top=0,e.$scroll_parent=null};"fixed"===this.tree_widget.$el.css("position")&&t();var o=function(){var t=["overflow","overflow-y"],o=function(e){for(var o=0,n=t;o<n.length;o++){var r=n[o],i=e.css(r);if("auto"===i||"scroll"===i)return!0}return!1};if(o(e.tree_widget.$el))return e.tree_widget.$el;for(var n=0,r=e.tree_widget.$el.parents().get();n<r.length;n++){var i=r[n],s=$(i);if(o(s))return s}return null}();o&&o.length&&"HTML"!==o[0].tagName?(this.$scroll_parent=o,this.scroll_parent_top=this.$scroll_parent.offset().top):t(),this.is_initialized=!0},e.prototype._ensureInit=function(){this.is_initialized||this._initScrollParent()},e.prototype._handleScrollingWithScrollParent=function(e){this.$scroll_parent&&(this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-e.bottom<20?(this.$scroll_parent[0].scrollTop+=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1):e.top-this.scroll_parent_top<20&&(this.$scroll_parent[0].scrollTop-=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1))},e.prototype._handleScrollingWithDocument=function(e){e.top-$(document).scrollTop()<20?$(document).scrollTop($(document).scrollTop()-20):$(window).height()-(e.bottom-$(document).scrollTop())<20&&$(document).scrollTop($(document).scrollTop()+20)},e}();o.default=n},{}],11:[function(e,t,o){"use strict";o.__esModule=!0;var n=function(){function e(e){this.tree_widget=e,this.clear()}return e.prototype.getSelectedNode=function(){var e=this.getSelectedNodes();return!!e.length&&e[0]},e.prototype.getSelectedNodes=function(){if(this.selected_single_node)return[this.selected_single_node];var e=[];for(var t in this.selected_nodes)if(this.selected_nodes.hasOwnProperty(t)){var o=this.tree_widget.getNodeById(t);o&&e.push(o)}return e},e.prototype.getSelectedNodesUnder=function(e){if(this.selected_single_node)return e.isParentOf(this.selected_single_node)?[this.selected_single_node]:[];var t=[];for(var o in this.selected_nodes)if(this.selected_nodes.hasOwnProperty(o)){var n=this.tree_widget.getNodeById(o);n&&e.isParentOf(n)&&t.push(n)}return t},e.prototype.isNodeSelected=function(e){return!!e&&(null!=e.id?!!this.selected_nodes[e.id]:!!this.selected_single_node&&this.selected_single_node.element===e.element)},e.prototype.clear=function(){this.selected_nodes={},this.selected_single_node=null},e.prototype.removeFromSelection=function(e,t){var o=this;void 0===t&&(t=!1),null==e.id?this.selected_single_node&&e.element===this.selected_single_node.element&&(this.selected_single_node=null):(delete this.selected_nodes[e.id],t&&e.iterate(function(){return delete o.selected_nodes[e.id],!0}))},e.prototype.addToSelection=function(e){null!=e.id?this.selected_nodes[e.id]=!0:this.selected_single_node=e},e}();o.default=n},{}],12:[function(e,t,o){"use strict";o.__esModule=!0;var n=function(){function e(e,t){this.$el=$(e);var o=this.constructor.defaults;this.options=$.extend({},o,t)}return e.register=function(t,o){function n(t,o){var n=$.data(t,o);return n&&n instanceof e?n:null}function r(e,o){for(var r=a(),i=0,s=e.get();i<s.length;i++){var l=s[i];if(!n(l,r)){var d=new t(l,o);$.data(l,r)||$.data(l,r,d),d._init()}}return e}function i(e){for(var t=a(),o=0,r=e.get();o<r.length;o++){var i=r[o],s=n(i,t);s&&s.destroy(),$.removeData(i,t)}}function s(t,o,n){for(var r=null,i=0,s=t.get();i<s.length;i++){var l=s[i],d=$.data(l,a());if(d&&d instanceof e){var h=d[o];h&&"function"==typeof h&&(r=h.apply(d,n))}}return r}var a=function(){return"simple_widget_"+o};$.fn[o]=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];var a=this;if(void 0===e||"object"==typeof e)return r(a,e);if("string"==typeof e&&"_"!==e[0]){var l=e;return"destroy"===l?i(a):"get_widget_class"===l?t:s(a,l,o)}}},e.prototype.destroy=function(){this._deinit()},e.prototype._init=function(){},e.prototype._deinit=function(){},e.defaults={},e}();o.default=n},{}],13:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();o.__esModule=!0;var r=e("./version"),i=e("./drag_and_drop_handler"),s=e("./elements_renderer"),a=e("./key_handler"),l=e("./mouse.widget"),d=e("./save_state_handler"),h=e("./scroll_handler"),u=e("./select_node_handler"),p=e("./simple.widget"),c=e("./node"),f=e("./util"),_=e("./node_element"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.toggle=function(e,t){var o=null==t?this.options.slide:t;return e.is_open?this.closeNode(e,o):this.openNode(e,o),this.element},t.prototype.getTree=function(){return this.tree},t.prototype.selectNode=function(e){return this._selectNode(e,!1),this.element},t.prototype.getSelectedNode=function(){return!!this.select_node_handler&&this.select_node_handler.getSelectedNode()},t.prototype.toJson=function(){return JSON.stringify(this.tree.getData())},t.prototype.loadData=function(e,t){return this._loadData(e,t),this.element},t.prototype.loadDataFromUrl=function(e,t,o){return"string"===$.type(e)?this._loadDataFromUrl(e,t,o):this._loadDataFromUrl(null,e,t),this.element},t.prototype.reload=function(e){return this._loadDataFromUrl(null,null,e),this.element},t.prototype.getNodeById=function(e){return this.tree.getNodeById(e)},t.prototype.getNodeByName=function(e){return this.tree.getNodeByName(e)},t.prototype.getNodesByProperty=function(e,t){return this.tree.getNodesByProperty(e,t)},t.prototype.getNodeByHtmlElement=function(e){return this._getNode($(e))},t.prototype.getNodeByCallback=function(e){return this.tree.getNodeByCallback(e)},t.prototype.openNode=function(e,t,o){var n=this,r=function(){var e,r;return f.isFunction(t)?(e=t,r=null):(r=t,e=o),null==r&&(r=n.options.slide),[r,e]}(),i=r[0],s=r[1];return e&&this._openNode(e,i,s),this.element},t.prototype.closeNode=function(e,t){var o=null==t?this.options.slide:t;return e.isFolder()&&(new _.FolderElement(e,this).close(o,this.options.animationSpeed),this._saveState()),this.element},t.prototype.isDragging=function(){return!!this.dnd_handler&&this.dnd_handler.is_dragging},t.prototype.refreshHitAreas=function(){return this.dnd_handler&&this.dnd_handler.refresh(),this.element},t.prototype.addNodeAfter=function(e,t){var o=t.addAfter(e);return o&&this._refreshElements(t.parent),o},t.prototype.addNodeBefore=function(e,t){var o=t.addBefore(e);return o&&this._refreshElements(t.parent),o},t.prototype.addParentNode=function(e,t){var o=t.addParent(e);return o&&this._refreshElements(o.parent),o},t.prototype.removeNode=function(e){return e.parent&&this.select_node_handler&&(this.select_node_handler.removeFromSelection(e,!0),e.remove(),this._refreshElements(e.parent)),this.element},t.prototype.appendNode=function(e,t){var o=t||this.tree,n=o.append(e);return this._refreshElements(o),n},t.prototype.prependNode=function(e,t){var o=t||this.tree,n=o.prepend(e);return this._refreshElements(o),n},t.prototype.updateNode=function(e,t){var o=t.id&&t.id!==e.id;return o&&this.tree.removeNodeFromIndex(e),e.setData(t),o&&this.tree.addNodeToIndex(e),"object"==typeof t&&t.children&&(e.removeChildren(),t.children.length&&e.loadFromData(t.children)),this.renderer.renderFromNode(e),this._selectCurrentNode(),this.element},t.prototype.moveNode=function(e,t,o){var n=c.getPosition(o);return this.tree.moveNode(e,t,n),this._refreshElements(null),this.element},t.prototype.getStateFromStorage=function(){if(this.save_state_handler)return this.save_state_handler.getStateFromStorage()},t.prototype.addToSelection=function(e){return e&&this.select_node_handler&&(this.select_node_handler.addToSelection(e),this._getNodeElementForNode(e).select(),this._saveState()),this.element},t.prototype.getSelectedNodes=function(){return this.select_node_handler?this.select_node_handler.getSelectedNodes():[]},t.prototype.isNodeSelected=function(e){return!!this.select_node_handler&&this.select_node_handler.isNodeSelected(e)},t.prototype.removeFromSelection=function(e){return this.select_node_handler&&(this.select_node_handler.removeFromSelection(e),this._getNodeElementForNode(e).deselect(),this._saveState()),this.element},t.prototype.scrollToNode=function(e){if(this.scroll_handler){var t=$(e.element).offset().top-this.$el.offset().top;this.scroll_handler.scrollTo(t)}return this.element},t.prototype.getState=function(){if(this.save_state_handler)return this.save_state_handler.getState()},t.prototype.setState=function(e){return this.save_state_handler&&(this.save_state_handler.setInitialState(e),this._refreshElements(null)),this.element},t.prototype.setOption=function(e,t){return this.options[e]=t,this.element},t.prototype.moveDown=function(){return this.key_handler&&this.key_handler.moveDown(),this.element},t.prototype.moveUp=function(){return this.key_handler&&this.key_handler.moveUp(),this.element},t.prototype.getVersion=function(){return r.default},t.prototype.testGenerateHitAreas=function(e){return this.dnd_handler?(this.dnd_handler.current_item=this._getNodeElementForNode(e),this.dnd_handler.generateHitAreas(),this.dnd_handler.hit_areas):[]},t.prototype._triggerEvent=function(e,t){var o=$.Event(e);return $.extend(o,t),this.element.trigger(o),o},t.prototype._openNode=function(e,t,o){var n=this;void 0===t&&(t=!0);var r=function(e,t,o){new _.FolderElement(e,n).open(o,t,n.options.animationSpeed)};if(e.isFolder())if(e.load_on_demand)this._loadFolderOnDemand(e,t,o);else{for(var i=e.parent;i;)i.parent&&r(i,!1,null),i=i.parent;r(e,t,o),this._saveState()}},t.prototype._refreshElements=function(e){this.renderer.render(e),this._triggerEvent("tree.refresh")},t.prototype._getNodeElementForNode=function(e){return e.isFolder()?new _.FolderElement(e,this):new _.NodeElement(e,this)},t.prototype._getNodeElement=function(e){var t=this._getNode(e);return t?this._getNodeElementForNode(t):null},t.prototype._containsElement=function(e){var t=this._getNode($(e));return null!=t&&t.tree===this.tree},t.prototype._init=function(){e.prototype._init.call(this),this.element=this.$el,this.mouse_delay=300,this.is_initialized=!1,this.options.rtl=this._getRtlOption(),null===this.options.closedIcon&&(this.options.closedIcon=this._getDefaultClosedIcon()),this.renderer=new s.default(this),null!=d.default?this.save_state_handler=new d.default(this):this.options.saveState=!1,null!=u.default&&(this.select_node_handler=new u.default(this)),null!=i.DragAndDropHandler?this.dnd_handler=new i.DragAndDropHandler(this):this.options.dragAndDrop=!1,null!=h.default&&(this.scroll_handler=new h.default(this)),null!=a.default&&null!=u.default&&(this.key_handler=new a.default(this)),this._initData(),this.element.click($.proxy(this._click,this)),this.element.dblclick($.proxy(this._dblclick,this)),this.options.useContextMenu&&this.element.on("contextmenu",$.proxy(this._contextmenu,this))},t.prototype._deinit=function(){this.element.empty(),this.element.off(),this.key_handler&&this.key_handler.deinit(),this.tree=new c.Node({},!0),e.prototype._deinit.call(this)},t.prototype._mouseCapture=function(e){return!(!this.options.dragAndDrop||!this.dnd_handler)&&this.dnd_handler.mouseCapture(e)},t.prototype._mouseStart=function(e){return!(!this.options.dragAndDrop||!this.dnd_handler)&&this.dnd_handler.mouseStart(e)},t.prototype._mouseDrag=function(e){if(this.options.dragAndDrop&&this.dnd_handler){var t=this.dnd_handler.mouseDrag(e);return this.scroll_handler&&this.scroll_handler.checkScrolling(),t}return!1},t.prototype._mouseStop=function(e){return!(!this.options.dragAndDrop||!this.dnd_handler)&&this.dnd_handler.mouseStop(e)},t.prototype._initData=function(){this.options.data?this._loadData(this.options.data,null):this._getDataUrlInfo(null)?this._loadDataFromUrl(null,null,null):this._loadData([],null)},t.prototype._getDataUrlInfo=function(e){var t=this,o=this.options.dataUrl||this.element.data("url");return $.isFunction(o)?o(e):"string"===$.type(o)?function(){var n={url:o};if(e&&e.id)i={node:e.id},n.data=i;else{var r=t._getNodeIdToBeSelected();if(r){var i={selected_node:r};n.data=i}}return n}():o},t.prototype._getNodeIdToBeSelected=function(){return this.options.saveState&&this.save_state_handler?this.save_state_handler.getNodeIdToBeSelected():null},t.prototype._initTree=function(e){var t=this,o=function(){t.is_initialized||(t.is_initialized=!0,t._triggerEvent("tree.init"))};this.tree=new this.options.nodeClass(null,!0,this.options.nodeClass),this.select_node_handler&&this.select_node_handler.clear(),this.tree.loadFromData(e);var n=this._setInitialState();this._refreshElements(null),n?this._setInitialStateOnDemand(o):o()},t.prototype._setInitialState=function(){var e=this,t=function(){if(e.options.saveState&&e.save_state_handler){var t=e.save_state_handler.getStateFromStorage();return t?[!0,e.save_state_handler.setInitialState(t)]:[!1,!1]}return[!1,!1]}(),o=t[0],n=t[1];return o||(n=function(){if(!1===e.options.autoOpen)return!1;var t=e._getAutoOpenMaxLevel(),o=!1;return e.tree.iterate(function(e,n){return e.load_on_demand?(o=!0,!1):!!e.hasChildren()&&(e.is_open=!0,n!==t)}),o}()),n},t.prototype._setInitialStateOnDemand=function(e){var t=this;(function(){if(t.options.saveState&&t.save_state_handler){var o=t.save_state_handler.getStateFromStorage();return!!o&&(t.save_state_handler.setInitialStateOnDemand(o,e),!0)}return!1})()||function(){var o=t._getAutoOpenMaxLevel(),n=0,r=function(e){n+=1,t._openNode(e,!1,function(){n-=1,i()})},i=function(){t.tree.iterate(function(e,n){return e.load_on_demand?(e.is_loading||r(e),!1):(t._openNode(e,!1,null),n!==o)}),0===n&&e()};i()}()},t.prototype._getAutoOpenMaxLevel=function(){return!0===this.options.autoOpen?-1:parseInt(this.options.autoOpen,10)},t.prototype._click=function(e){var t=this._getClickTarget(e.target);if(t)if("button"===t.type)this.toggle(t.node,this.options.slide),e.preventDefault(),e.stopPropagation();else if("label"===t.type){var o=t.node;this._triggerEvent("tree.click",{node:o,click_event:e}).isDefaultPrevented()||this._selectNode(o,!0)}},t.prototype._dblclick=function(e){var t=this._getClickTarget(e.target);t&&"label"===t.type&&this._triggerEvent("tree.dblclick",{node:t.node,click_event:e})},t.prototype._getClickTarget=function(e){var t=$(e),o=t.closest(".jqtree-toggler");if(o.length){if(r=this._getNode(o))return{type:"button",node:r}}else{var n=t.closest(".jqtree-element");if(n.length){var r=this._getNode(n);if(r)return{type:"label",node:r}}}return null},t.prototype._getNode=function(e){var t=e.closest("li.jqtree_common");return 0===t.length?null:t.data("node")},t.prototype._contextmenu=function(e){var t=$(e.target).closest("ul.jqtree-tree .jqtree-element");if(t.length){var o=this._getNode(t);if(o)return e.preventDefault(),e.stopPropagation(),this._triggerEvent("tree.contextmenu",{node:o,click_event:e}),!1}return null},t.prototype._saveState=function(){this.options.saveState&&this.save_state_handler&&this.save_state_handler.saveState()},t.prototype._selectCurrentNode=function(){var e=this.getSelectedNode();if(e){var t=this._getNodeElementForNode(e);t&&t.select()}},t.prototype._deselectCurrentNode=function(){var e=this.getSelectedNode();e&&this.removeFromSelection(e)},t.prototype._getDefaultClosedIcon=function(){return this.options.rtl?"&#x25c0;":"&#x25ba;"},t.prototype._getRtlOption=function(){if(null!=this.options.rtl)return this.options.rtl;var e=this.element.data("rtl");return null!=e&&!1!==e},t.prototype._notifyLoading=function(e,t,o){this.options.onLoading&&this.options.onLoading(e,t,o)},t.prototype._selectNode=function(e,t){var o=this;if(void 0===t&&(t=!1),this.select_node_handler){var n=function(){o.options.saveState&&o.save_state_handler&&o.save_state_handler.saveState()};if(!e)return this._deselectCurrentNode(),void n();if(o.options.onCanSelectNode?o.options.selectable&&o.options.onCanSelectNode(e):o.options.selectable){if(this.select_node_handler.isNodeSelected(e))t&&(this._deselectCurrentNode(),this._triggerEvent("tree.select",{node:null,previous_node:e}));else{var r=this.getSelectedNode();this._deselectCurrentNode(),this.addToSelection(e),this._triggerEvent("tree.select",{node:e,deselected_node:r}),function(){var t=e.parent;t&&t.parent&&!t.is_open&&o.openNode(t,!1)}()}n()}}},t.prototype._loadData=function(e,t){e&&(this._triggerEvent("tree.load_data",{tree_data:e}),t?(this._deselectNodes(t),this._loadSubtree(e,t)):this._initTree(e),this.isDragging()&&this.dnd_handler&&this.dnd_handler.refresh())},t.prototype._deselectNodes=function(e){if(this.select_node_handler)for(var t=0,o=this.select_node_handler.getSelectedNodesUnder(e);t<o.length;t++){var n=o[t];this.select_node_handler.removeFromSelection(n)}},t.prototype._loadSubtree=function(e,t){t.loadFromData(e),t.load_on_demand=!1,t.is_loading=!1,this._refreshElements(t)},t.prototype._loadDataFromUrl=function(e,t,o){var n=this,r=null,i=e,s=function(){r&&(r.removeClass("jqtree-loading"),n._notifyLoading(!1,t,r))},a=function(){return"string"===$.type(i)?{url:i}:(i.method||(i.method="get"),i)},l=function(e){s(),n._loadData(e,t),o&&$.isFunction(o)&&o()},d=function(e){return $.isArray(e)||"object"==typeof e?e:null!=e?$.parseJSON(e):[]},h=function(e){return n.options.dataFilter?n.options.dataFilter(e):e},u=function(e){var t=h(d(e));l(t)},p=function(e){s(),n.options.onLoadFailed&&n.options.onLoadFailed(e)};return e||(i=this._getDataUrlInfo(t)),(r=t?$(t.element):n.element).addClass("jqtree-loading"),n._notifyLoading(!0,t,r),i?$.isArray(i)?void l(i):void function(){var e=a();$.ajax($.extend({},e,{method:null!=i.method?i.method.toUpperCase():"GET",cache:!1,dataType:"json",success:u,error:p}))}():void s()},t.prototype._loadFolderOnDemand=function(e,t,o){var n=this;void 0===t&&(t=!0),e.is_loading=!0,this._loadDataFromUrl(null,e,function(){n._openNode(e,t,o)})},t.defaults={animationSpeed:"fast",autoOpen:!1,saveState:!1,dragAndDrop:!1,selectable:!0,useContextMenu:!0,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:!0,dataUrl:null,closedIcon:null,openedIcon:"&#x25bc;",slide:!0,nodeClass:c.Node,dataFilter:null,keyboardSupport:!0,openFolderDelay:500,rtl:!1,onDragMove:null,onDragStop:null,buttonLeft:!0,onLoading:null,tabIndex:0},t}(l.default);p.default.register(m,"tree")},{"./drag_and_drop_handler":3,"./elements_renderer":4,"./key_handler":5,"./mouse.widget":6,"./node":7,"./node_element":8,"./save_state_handler":9,"./scroll_handler":10,"./select_node_handler":11,"./simple.widget":12,"./util":14,"./version":15}],14:[function(e,t,o){"use strict";o.__esModule=!0,o.isInt=function(e){return"number"==typeof e&&e%1==0},o.isFunction=function(e){return"function"==typeof e},o.html_escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},o.getBoolString=function(e){return e?"true":"false"}},{}],15:[function(e,t,o){"use strict";o.__esModule=!0;o.default="1.4.3"},{}],16:[function(e,t,o){"use strict";function n(e){return decodeURIComponent(e.replace(/\+/g," "))}var r=Object.prototype.hasOwnProperty;o.stringify=function(e,t){var o=[];"string"!=typeof(t=t||"")&&(t="?");for(var n in e)r.call(e,n)&&o.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return o.length?t+o.join("&"):""},o.parse=function(e){for(var t,o=/([^=?&]+)=?([^&]*)/g,r={};t=o.exec(e);r[n(t[1])]=n(t[2]));return r}},{}],17:[function(e,t,o){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],18:[function(e,t,o){function n(e,t){var o,n=document.createElement(e||"div");for(o in t)n[o]=t[o];return n}function r(e){for(var t=1,o=arguments.length;t<o;t++)e.appendChild(arguments[t]);return e}function i(e,t,o,n){var r=["opacity",t,~~(100*e),o,n].join("-"),i=.01+o/n*100,s=Math.max(1-(1-e)/t*(100-i),e),a=h.substring(0,h.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return p[r]||(c.insertRule("@"+l+"keyframes "+r+"{0%{opacity:"+s+"}"+i+"%{opacity:"+e+"}"+(i+.01)+"%{opacity:1}"+(i+t)%100+"%{opacity:"+e+"}100%{opacity:"+s+"}}",0),p[r]=1),r}function s(e,t){var o,n,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<u.length;n++)if(o=u[n]+t,void 0!==r[o])return o}function a(e,t){for(var o in t)e.style[s(e,o)||o]=t[o];return e}function l(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)void 0===e[n]&&(e[n]=o[n])}return e}function d(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var h,u=["webkit","Moz","ms","O"],p={},c=function(){var e=n("style");return r(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},_=function e(t){if(!this.spin)return new e(t);this.opts=l(t||{},e.defaults,f)};_.defaults={},l(_.prototype,{spin:function(e){this.stop();var t,o,r=this,i=r.opts,s=r.el=a(n(0,{className:i.className}),{position:"relative",zIndex:i.zIndex}),l=i.radius+i.length+i.width;if(e&&(e.insertBefore(s,e.firstChild||null),o=d(e),t=d(s),a(s,{left:("auto"==i.left?o.x-t.x+(e.offsetWidth>>1):i.left+l)+"px",top:("auto"==i.top?o.y-t.y+(e.offsetHeight>>1):i.top+l)+"px"})),s.setAttribute("aria-role","progressbar"),r.lines(s,r.opts),!h){var u=0,p=i.fps,c=p/i.speed,f=(1-i.opacity)/(c*i.trail/100),_=c/i.lines;!function e(){u++;for(var t=i.lines;t;t--){var o=Math.max(1-(u+t*_)%c*f,i.opacity);r.opacity(s,i.lines-t,o,i)}r.timeout=r.el&&setTimeout(e,~~(1e3/p))}()}return r},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(e,t){function o(e,o){return a(n(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:o,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*l+t.rotate)+"deg) translate("+t.radius+"px,0)",borderRadius:(t.width>>1)+"px"})}for(var s,l=0;l<t.lines;l++)s=a(n(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:h&&i(t.opacity,t.trail,l,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&r(s,a(o("#000","0 0 4px #000"),{top:"2px"})),r(e,r(s,o(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,o){t<e.childNodes.length&&(e.childNodes[t].style.opacity=o)}}),function(){function e(e,t){return n("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=a(n("group"),{behavior:"url(#default#VML)"});!s(t,"transform")&&t.adj?(c.addRule(".spin-vml","behavior:url(#default#VML)"),_.prototype.lines=function(t,o){function n(){return a(e("group",{coordsize:d+" "+d,coordorigin:-l+" "+-l}),{width:d,height:d})}function i(t,i,s){r(u,r(a(n(),{rotation:360/o.lines*t+"deg",left:~~i}),r(a(e("roundrect",{arcsize:1}),{width:l,height:o.width,left:o.radius,top:-o.width>>1,filter:s}),e("fill",{color:o.color,opacity:o.opacity}),e("stroke",{opacity:0}))))}var s,l=o.length+o.width,d=2*l,h=2*-(o.width+o.length)+"px",u=a(n(),{position:"absolute",top:h,left:h});if(o.shadow)for(s=1;s<=o.lines;s++)i(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=o.lines;s++)i(s);return r(t,u)},_.prototype.opacity=function(e,t,o,n){var r=e.firstChild;n=n.shadow&&n.lines||0,r&&t+n<r.childNodes.length&&(r=(r=(r=r.childNodes[t+n])&&r.firstChild)&&r.firstChild)&&(r.opacity=o)}):h=s(t,"animation")}(),t.exports=_},{}],19:[function(e,t,o){(function(o){"use strict";function n(e){var t,n={},r=typeof(e=e||o.location||{});if("blob:"===e.protocol)n=new s(unescape(e.pathname),{});else if("string"===r){n=new s(e,{});for(t in p)delete n[t]}else if("object"===r){for(t in e)t in p||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=h.test(e.href))}return n}function r(e){var t=d.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function i(e,t){for(var o=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=o.length,r=o[n-1],i=!1,s=0;n--;)"."===o[n]?o.splice(n,1):".."===o[n]?(o.splice(n,1),s++):s&&(0===n&&(i=!0),o.splice(n,1),s--);return i&&o.unshift(""),"."!==r&&".."!==r||o.push(""),o.join("/")}function s(e,t,o){if(!(this instanceof s))return new s(e,t,o);var d,h,p,c,f,_,m=u.slice(),g=typeof t,v=this,y=0;for("object"!==g&&"string"!==g&&(o=t,t=null),o&&"function"!=typeof o&&(o=l.parse),t=n(t),d=!(h=r(e||"")).protocol&&!h.slashes,v.slashes=h.slashes||d&&t.slashes,v.protocol=h.protocol||t.protocol||"",e=h.rest,h.slashes||(m[2]=[/(.*)/,"pathname"]);y<m.length;y++)p=(c=m[y])[0],_=c[1],p!==p?v[_]=e:"string"==typeof p?~(f=e.indexOf(p))&&("number"==typeof c[2]?(v[_]=e.slice(0,f),e=e.slice(f+c[2])):(v[_]=e.slice(f),e=e.slice(0,f))):(f=p.exec(e))&&(v[_]=f[1],e=e.slice(0,f.index)),v[_]=v[_]||(d&&c[3]?t[_]||"":""),c[4]&&(v[_]=v[_].toLowerCase());o&&(v.query=o(v.query)),d&&t.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==t.pathname)&&(v.pathname=i(v.pathname,t.pathname)),a(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(c=v.auth.split(":"),v.username=c[0]||"",v.password=c[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}var a=e("requires-port"),l=e("querystringify"),d=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,h=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};s.prototype={set:function(e,t,o){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(o||l.parse)(t)),n[e]=t;break;case"port":n[e]=t,a(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!o;break;case"pathname":case"hash":if(t){var r="pathname"===e?"/":"#";n[e]=t.charAt(0)!==r?r+t:t}else n[e]=t;break;default:n[e]=t}for(var i=0;i<u.length;i++){var s=u[i];s[4]&&(n[s[1]]=n[s[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(e){e&&"function"==typeof e||(e=l.stringify);var t,o=this,n=o.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var r=n+(o.slashes?"//":"");return o.username&&(r+=o.username,o.password&&(r+=":"+o.password),r+="@"),r+=o.host+o.pathname,(t="object"==typeof o.query?e(o.query):o.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),o.hash&&(r+=o.hash),r}},s.extractProtocol=r,s.location=n,s.qs=l,t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:16,"requires-port":17}]},{},[1]);